{
  "hash": "eacfe67815089462a09b4e69a4fcc784",
  "result": {
    "markdown": "---\ntitle: \"Graphic Design with ggplot2\"\nsubtitle: \"<span style='font-size:1.75em;line-height:1.1;'>Working with Colors</span></span>\"\nauthor: \"<b style='color:#28a87d;'>Cédric Scherer</b> **//** rstudio::conf **//** July 2022\"\nformat: \n  revealjs: \n    theme: css/style.scss\n    footer: '**[Cédric Scherer](https::/cedricscherer.com) //** rstudio::conf **//** July 2022'\n    #'rstudio::conf(workshop = \"Graphic Design with ggplot2\", instructor = \"Cédric Scherer\")'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\n    mainfont: Cabinet Grotesk\neditor: source\nknitr:\n  opts_chunk: \n    dev: \"ragg_png\"\n    retina: 1\n    dpi: 300\nexecute:\n  freeze: auto\n  cache: true\n  echo: true\n  fig-width: 5\n  fig-height: 6\n---\n\n\n## Setup\n\n\n::: {.cell hash='06_colors_cache/revealjs/prep_27ad548c644c27942a434ffdb2d16e68'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nlibrary(tidyverse)\n\nbikes <- readr::read_csv(\n  here::here(\"data\", \"london-bikes-custom.csv\"), \n  col_types = \"Dcfffilllddddc\"\n)\n\nbikes$season <- forcats::fct_inorder(bikes$season)\n\ntheme_set(theme_light(base_size = 14, base_family = \"Roboto Condensed\"))\n\ntheme_update(\n  panel.grid.minor = element_blank(),\n  plot.title = element_text(face = \"bold\"),\n  legend.position = \"top\",\n  plot.title.position = \"plot\"\n)\n```\n:::\n\n\n# Color Palettes\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-viridis_dfe25181603c49799ccf8f44407c4b5a'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6|7,8,9,10\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_viridis_d(\n    option = \"plasma\",\n    begin = .3\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-viridis-1.png){width=1500}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-viridis-month_5781788641fc40153249240c2d6fd6f5'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = month)\n  ) +\n  geom_boxplot() +\n  scale_fill_viridis_d(\n    option = \"plasma\",\n    begin = .3\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-viridis-month-1.png){width=1500}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-viridis-cont_350ae4a6935a8122a4c43740fad1a994'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,7|7,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    option = \"plasma\",\n    end = .9\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-viridis-cont-1.png){width=1500}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-viridis-cont-rev_bb8206d48d6a311e1e2f6bc1a5e64d15'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    option = \"plasma\",\n    end = .9,\n    direction = -1\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-viridis-cont-rev-1.png){width=1500}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Brewer\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-brewer_ddffe52b0bcf663522f4248a876f5cda'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_brewer(\n    palette = \"Set1\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-brewer-1.png){width=1500}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Brewer\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-brewer-show-all_fe12855122fe75b1c2ba7792748e84b6'}\n\n```{.r .cell-code}\nRColorBrewer::display.brewer.all()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-brewer-show-all-1.png){width=3600}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Brewer\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-brewer-show-cvd_a1160b82849be29095243abf99001e61'}\n\n```{.r .cell-code}\nRColorBrewer::display.brewer.all(colorblindFriendly = TRUE)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-brewer-show-cvd-1.png){width=3600}\n:::\n:::\n\n\n## {rcartocolor}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto_b9042dfa53182a8a3e8ec2ba72c63f2e'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  rcartocolor::scale_fill_carto_d(\n    name = \"Vivid\" \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-1.png){width=1500}\n:::\n:::\n\n\n## {rcartocolor}\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-carto-show-all_47d3f78e5c5384528daf266659b9fea9'}\n\n```{.r .cell-code}\nrcartocolor::display_carto_all()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-show-all-1.png){width=3600}\n:::\n:::\n\n\n## {rcartocolor}\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-carto-show-cvd_a676fc51c10c3ea1f078c18ccd9066d3'}\n\n```{.r .cell-code}\nrcartocolor::display_carto_all(colorblind_friendly = TRUE)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-show-cvd-1.png){width=3600}\n:::\n:::\n\n\n## {scico}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-scico_22ddaebbbeebe5c069fdf069413328b3'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"scico\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scico::scale_fill_scico_d(\n    palette = \"hawaii\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-scico-1.png){width=1500}\n:::\n:::\n\n\n## {scico}\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-scico-show-all_018d3fc8c4d7bda0bb48eb805c069703'}\n\n```{.r .cell-code}\nscico::scico_palette_show()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-scico-show-all-1.png){width=3600}\n:::\n:::\n\n\n## {ggsci} and {ggthemes}\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-ggsci_657ef634bdf17b6862437a9398c245ca'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\n# install.packages(\"ggsci\")\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  ggsci::scale_fill_npg()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-ggsci-1.png){width=1500}\n:::\n:::\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-ggthemes_c9d8aee8586901356a91ae9c6deeebbb'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\n# install.packages(\"ggthemes\")\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  ggthemes::scale_fill_gdocs()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-ggthemes-1.png){width=1500}\n:::\n:::\n\n:::\n\n## {nord}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-nord_4875c4389611893dd69bdc87c5297cbd'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"nord\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  nord::scale_fill_nord(\n    palette = \"aurora\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-nord-1.png){width=1500}\n:::\n:::\n\n\n## {nord}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-nord-cont_b173aba3c1b75030b485c4475c5027d9'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11,12\"}\n# install.packages(\"nord\")\n\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  nord::scale_color_nord(\n    palette = \"silver_mine\",\n    discrete = FALSE\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-nord-cont-1.png){width=1500}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-metbrewer_acbbb616450f8342f7f1b34c8f2e434a'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"MetBrewer\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  MetBrewer::scale_fill_met_d(\n    name = \"Klimt\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-1.png){width=1500}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-metbrewer-show-all_3a075be56b2978aaa204794a7a78d0f9'}\n\n```{.r .cell-code}\nMetBrewer::display_all()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-show-all-1.png){width=3600}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-metbrewer-show-cvd_935bf611baadfcdc37c7e9301f9d1466'}\n\n```{.r .cell-code}\nMetBrewer::display_all(colorblind_only = TRUE)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-show-cvd-1.png){width=3600}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-metbrewer-cont_6c46993009d12877d8183c11592b9241'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"MetBrewer\")\n\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  MetBrewer::scale_color_met_c(\n    name = \"Hiroshige\" \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-cont-1.png){width=1500}\n:::\n:::\n\n\n# Customize Palettes\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-default_a5b4a44e89804f4cbeba5053669a31a3'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  rcartocolor::scale_fill_carto_d(\n    name = \"Vivid\" \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-default-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-manual_49c139e1f5bfb964f29139c3309f5d7b'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11,12,13\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_pal(\n      name = \"Vivid\", n = 4\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-manual-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-custom_a01cd80659498892fbea726f46083d93'}\n\n```{.r .cell-code  code-line-numbers=\"11,12\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_pal(\n      name = \"Vivid\", n = 5\n    )[1:4]\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-custom-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-custom-2_9b1d24b0b1846576d220e90856acd98f'}\n\n```{.r .cell-code  code-line-numbers=\"12\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_pal(\n      name = \"Vivid\", n = 6\n    )[c(1, 3:5)]\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-custom-2-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-custom-3_60aac47d940460f2f401913ef7cb6cea'}\n\n```{.r .cell-code  code-line-numbers=\"12\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_pal(\n      name = \"Vivid\", n = 6\n    )[c(1, 3:5)]\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-custom-3-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-custom-assign_312b772e8481af5be5c99143b10a22ec'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|13\"}\ncarto_custom <- \n  carto_pal(\n    name = \"Vivid\", n = 6\n  )[c(1, 3:5)]\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-custom-assign-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-light_ebe8b5edc26b37a896931bb30123c39b'}\n\n```{.r .cell-code  code-line-numbers=\"2,4|12\"}\n# install.packages(\"colorspace\")\nlibrary(colorspace)\n\ncarto_light <- lighten(carto_custom, .8)\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_light\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-light-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale_1579cb2f9765994ab0b6187b7f4336a4'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8,9,12|7|8|\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(fill = season,\n        fill = after_scale(\n          lighten(fill, .8)\n        ))\n  ) +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale-stage_712c75971f7c669637a3d6342f0c195d'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9,10,11\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(\n      fill = stage(\n        season,\n        after_scale =\n          lighten(fill, .8)\n      )\n    )\n  ) +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-stage-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale-2_16ed89394d8b6893aad3e254eae13bde'}\n\n```{.r .cell-code  code-line-numbers=\"6|7,8,9|11\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n        ))\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-2-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale-combined_b3c830654981b4d97823a4de241d0557'}\n\n```{.r .cell-code  code-line-numbers=\"11,12,13,14,15,16,17,18|13,14,15,16\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n        ))\n  ) +\n  geom_jitter(\n    aes(color = season), \n    position = position_jitterdodge(\n      dodge.width = .75, \n      jitter.width = .2\n    ),\n    alpha = .4\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-combined-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale-combined-2_24306ee89dd642270fa65091b3318416'}\n\n```{.r .cell-code  code-line-numbers=\"13,14,15\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n        ))\n  ) +\n  geom_jitter(\n    aes(color = season,\n        color = after_scale(\n          darken(color, .3)\n        )), \n    position = position_jitterdodge(\n      dodge.width = .75, \n      jitter.width = .2\n    ),\n    alpha = .4\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-combined-2-1.png){width=1500}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale-combined-3_7a594124ed69b0dd782a6544d5ea032e'}\n\n```{.r .cell-code  code-line-numbers=\"13,14,15\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n        ))\n  ) +\n  geom_jitter(\n    aes(color = season,\n        color = after_scale(\n          darken(color, .3)\n        )), \n    position = position_jitterdodge(\n      dodge.width = .75, \n      jitter.width = .2\n    ),\n    alpha = .4\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-combined-3-1.png){width=1500}\n:::\n:::\n\n\n# Create New Palettes\n\n## Create Sequential Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradient_2c9ff69520b0acc1c972ba842efb6f4a'}\n\n```{.r .cell-code  code-line-numbers=\"7,10|8,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient(\n    low = \"#28A87D\",\n    high = \"#FFD166\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradient-1.png){width=1500}\n:::\n:::\n\n\n## Create Diverging Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradient2_058dcf4ad885714a11b8c46cfcc06ef3'}\n\n```{.r .cell-code  code-line-numbers=\"7,11|8,9,10\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    low = \"#663399\",\n    high = \"#993334\",\n    mid = \"grey95\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradient2-1.png){width=1500}\n:::\n:::\n\n\n## Create Diverging Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradient2-midpoint_2f4847732a208cda41bfaaf4d0b00899'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    low = \"#663399\",\n    high = \"#993334\",\n    mid = \"grey92\",\n    midpoint = 10    \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradient2-midpoint-1.png){width=1500}\n:::\n:::\n\n\n## Create Diverging Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradient2-midpoint-limits_3636940147efd8b4bf4d5d32470a1e79'}\n\n```{.r .cell-code  code-line-numbers=\"12\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    low = \"#663399\",\n    high = \"#993334\",\n    mid = \"grey92\",\n    midpoint = 10,\n    limits = c(-10, 30)   \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradient2-midpoint-limits-1.png){width=1500}\n:::\n:::\n\n\n## Create Any Palette\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradientn_16bfc1953a6ad01405e6baa467df77fd'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradientn(\n    colors = carto_custom  \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradientn-1.png){width=1500}\n:::\n:::\n\n\n## Create Any Palette\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradientn-weight_d06c107fbfe55b526e5d2ef6c5babc76'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradientn(\n    colors = carto_custom,\n    values = c(0, .2, .8, 1)\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradientn-weight-1.png){width=1500}\n:::\n:::\n\n\n# Build Your Own<br>`scale_color|fill_*()`\n\n\n\n---\n\n![Illustration by W. E. B. Du Bois, Courtesy Library of Congress](img/colors/dubois-viz.png){fig-alt=\"“Black Lives 1900: W. E. B. Du Bois at the Paris Exposition” reprints some of the striking photographs and graphics that Du Bois and his curators commissioned for the World’s Fair, here the colorful stacked bar chart on income and expenditure of 150 negro families in Atlanta.\" fig-width=\"60%\"}\n\n##  {background-image=\"img/colors/dubois-colors.png\" background-position=\"center\" background-size=\"92%\" background-alt=\"Seven colors based on and inspired by the graphic from W. E. B. Du Bois.\"}\n\n## Build Your Own `scale_color|fill_*()`\n\n::: {.cell hash='06_colors_cache/revealjs/dubois-colors-function_8e52ca076dcfc66368ccbab75ad4be4e'}\n\n```{.r .cell-code  code-line-numbers=\"1,18|2,3,4,5,6,7,8,9,10,11|13,14,15,16,17|20\"}\ndubois_colors <- function(...) {\n  dubois_cols <- c(\n    `black`    = \"#000000\",\n    `purple`   = \"#582f6c\",\n    `violet`   = \"#94679C\",\n    `pink`     = \"#ef849f\",\n    `softred`  = \"#f4b7a7\",\n    `iceblue`  = \"#bccbf3\",\n    `palegrey` = \"#e4e4e4\"\n  )\n\n  cols <- c(...)\n\n  if (is.null(cols))\n    return (dubois_cols)\n\n  dubois_cols[cols]\n}\n\ndubois_colors(\"black\", \"pink\", \"softred\", \"iceblue\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    black      pink   softred   iceblue \n\"#000000\" \"#ef849f\" \"#f4b7a7\" \"#bccbf3\" \n```\n:::\n:::\n\n## Build Your Own `scale_color|fill_*_d()`\n\n::: {.cell hash='06_colors_cache/revealjs/dubois-colors-pal-d-function_161135bb87d43b48c40c11ec262c8d98'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,12,13|3|5,6,7,8|9|11|13|15\"}\ndubois_pal_d <- function(palette = \"default\", reverse = FALSE) {\n  function(n) {\n    if(n > 5) stop('Palettes only contains 5 colors')\n\n    if (palette == \"default\") { pal <- dubois_colors(\"black\", \"violet\", \"softred\", \"iceblue\", \"palegrey\")[1:n] }\n    if (palette == \"dark\") { pal <- dubois_colors(1:5)[1:n] }\n    if (palette == \"light\") { pal <- dubois_colors(3:7)[1:n] }\n    \n    pal <- unname(pal)\n\n    if (reverse) rev(pal) else pal\n  }\n}\n\ndubois_pal_d()(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"#000000\" \"#94679C\" \"#f4b7a7\"\n```\n:::\n:::\n\n## Build Your Own `scale_fill|color_*_d()`\n\n::: {.cell hash='06_colors_cache/revealjs/dubois-scale-discrete-functions_74476768f73768b521177a5fadfa1af4'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7|9,10,11,12,13,14,15|2,10|4,12|6,14\"}\nscale_color_dubois_d <- function(palette = \"default\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"default\", \"dark\", \"light\")) stop('Palette should be \"default\", \"dark\" or \"light\".')\n\n  pal <- dubois_pal_d(palette = palette, reverse = reverse)\n\n  ggplot2::discrete_scale(\"colour\", paste0(\"dubois_\", palette), palette = pal, ...)\n}\n\nscale_fill_dubois_d <- function(palette = \"default\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"default\", \"dark\", \"light\")) stop('Palette should be \"default\", \"dark\" or \"light\".')\n\n  pal <- dubois_pal_d(palette = palette, reverse = reverse)\n\n  ggplot2::discrete_scale(\"fill\", paste0(\"dubois_\", palette), palette = pal, ...)\n}\n```\n:::\n\n## Use Your Own `scale_fill_*_d()`\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/dubois-scales-fill-d-use_c29c2bf5921234aa5274fd4678395d7a'}\n\n```{.r .cell-code  code-line-numbers=\"4,7\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_dubois_d()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/dubois-scales-fill-d-use-1.png){width=1500}\n:::\n:::\n\n## Use Your Own `scale_color_*_d()`\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/dubois-scales-color-d-use_80bcd927b143f94525f7b1ed10d9305d'}\n\n```{.r .cell-code  code-line-numbers=\"4,7,8,9,10\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        color = season)\n  ) +\n  geom_boxplot() +\n  scale_color_dubois_d(\n    palette = \"dark\",\n    reverse = TRUE\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/dubois-scales-color-d-use-1.png){width=1500}\n:::\n:::\n\n\n# Test Your Palettes\n\n\n## Emulate CVD\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/cvd-emulation-deutan_80ef7905810c98c30ea5817fcecd6de5'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6|14,15,16\"}\ndeut <- \n  colorspace::deutan(\n    viridis::turbo(\n      n = 100, direction = -1\n    )\n  )\n\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count,\n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradientn(\n    colors = deut\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/cvd-emulation-deutan-1.png){width=1500}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/cvd-emulation-all-prep_fc2fb699966ad49d7cf812f37fcca97a'}\n\n```{.r .cell-code}\ng <- \n  ggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_custom\n  )\n\ng\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/cvd-emulation-all-prep-1.png){width=1500}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/cvd-emulation-all_86680a8d180bd9fbbf63a5db22cca492'}\n\n```{.r .cell-code}\n# devtools::install_github(\"clauswilke/colorblindr\")\n\ncolorblindr::cvd_grid(g)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/cvd-emulation-all-1.png){width=1500}\n:::\n:::\n\n## Emulate CVD\n\n\n\n## Emulate CVD\n\n::: {.cell hash='06_colors_cache/revealjs/cvd-emulation-all-2_2253dabd250643052adb14ce819b75b8'}\n\n```{.r .cell-code}\n# devtools::install_github(\"clauswilke/colorblindr\")\n\ncolorblindr::cvd_grid(g2)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/cvd-emulation-all-2-1.png){width=4200}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/cvd-emulation-all-3-prep_1f5a0ac66650f2f28406365641bbe536'}\n\n```{.r .cell-code}\ng3 <- \n  g2 +\n  scale_color_manual(\n    values = c(\"#3c89d9\", \"#1ec99b\", \"#F7B01B\", \"#a26e7c\")\n  )\n```\n:::\n\n## Emulate CVD\n\n::: {.cell hash='06_colors_cache/revealjs/cvd-emulation-all-3_5d4e237ff334b2d8f4ba27e30971629a'}\n\n```{.r .cell-code}\n# devtools::install_github(\"clauswilke/colorblindr\")\n\ncolorblindr::cvd_grid(g3)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/cvd-emulation-all-3-1.png){width=4200}\n:::\n:::\n\n## <b style='color:#663399;'>Recap</b>\n\n::: recap\n::: incremental\n-   use **categorical** palettes for **qualitative** data\n    -  e.g. `scale_*_discrete()` and `scale_*_manual()` for custom options\n    -  e.g. `scale_*_viridis_d` and `scale_*_brewer()` for pre-defined options\n-   use **sequential or diverging** palettes for **quantitative** data\n    -  e.g. `scale_*_gradient()` or `scale_*_gradient2()` for custom options\n    -  e.g. `scale_*_viridis_c` and `scale_*_distiller()` for pre-defined options\n-   various packages provide palettes incl. `scale_*` components\n    - e.g. `{rcartocolors}`, `{scico}`, `{ggsci}`, `{ggthemes}`, `{nord}`\n-   those and even more packages return palettes as vectors\n    - modify and supply thehm to `scale_*_manual()` and `scale_*_gradientn()`\n-   use **`after_scale`** to modify and recycle color scales \n:::\n:::\n\n# Exercise\n\n## Exercise\n\n::: question\n-   **Create a similar visualization as close as possible:**\n:::\n\n::: {.cell layout-align=\"center\" hash='06_colors_cache/revealjs/exercise-jittered-errorbars_f0c97c60a4b5bc7be41eb9ee0634e351'}\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/exercise-jittered-errorbars-1.png){fig-align='center' width=3000}\n:::\n:::\n\n::: {.cell hash='06_colors_cache/revealjs/countdown-ex1_f20122a8b337fad905187dc0e566a4dd'}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_62f3af82\" style=\"right:0;bottom:0;font-size:.5em;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">20</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n# Appendix\n\n# HCL Spectrum\n\n## Evaluate HCL Spectrum\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-colorspace-spec-explain_424808778e5c892541586f082f9f5a14'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  colorspace::diverging_hcl(\n    n = 100, palette = \"Blue-Red\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-colorspace-spec-explain-1.png){width=1500}\n:::\n:::\n\n## Evaluate HCL Spectrum\n\n::: {layout-ncol=\"2\"}\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-scico-spec_7e42031c8641fa0f813517ae7c46782c'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  scico::scico(\n    n = 100, palette = \"hawaii\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-scico-spec-1.png){width=1500}\n:::\n:::\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-metbrewer-spec_eb24e5d2d89422525fe8eadbdb66cd66'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  MetBrewer::met.brewer(\n     n = 100, name = \"Hiroshige\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-spec-1.png){width=1500}\n:::\n:::\n:::\n\n## Evaluate HCL Spectrum\n\n::: {layout-ncol=\"2\"}\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-carto-spec_b7793123a81d65930ac9042238933d81'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  rcartocolor::carto_pal(\n    n = 7, name = \"TealRose\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-spec-1.png){width=1500}\n:::\n:::\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-metbrewer-spec-2_1fcc9a8a85ad0482046ab7fdb404188a'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  MetBrewer::met.brewer(\n     n = 100, name = \"Cassatt2\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-spec-2-1.png){width=1500}\n:::\n:::\n:::\n\n## Evaluate HCL Spectrum\n\n::: {layout-ncol=\"2\"}\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-rainbow-spec_a580d36507774743d0796b868a087b68'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  rainbow(\n    n = 100\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-rainbow-spec-1.png){width=1500}\n:::\n:::\n\n::: {.cell hash='06_colors_cache/revealjs/color-palette-viridis-spec_0b358b032617339894dcf173e8ba5743'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  viridis::turbo(\n     n = 100, direction = -1\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palette-viridis-spec-1.png){width=1500}\n:::\n:::\n:::\n\n## Build Your Own `scale_color|fill_*_c()`\n\n::: {.cell hash='06_colors_cache/revealjs/dubois-colors-pal-c-function_957af792d744b75f6dd0e59412a9bf4a'}\n\n```{.r .cell-code  code-line-numbers=\"1,13|2,3,4,5|7,8|10|12|15\"}\ndubois_pal_c <- function(palette = \"dark\", reverse = FALSE, ...) {\n  dubois_palettes <- list(\n    `dark`    = dubois_colors(\"black\", \"purple\", \"violet\", \"pink\"),\n    `light`   = dubois_colors(\"purple\", \"violet\", \"pink\", \"palered\")\n  )\n\n  pal <- dubois_palettes[[palette]]\n  pal <- unname(pal)\n\n  if (reverse) pal <- rev(pal)\n\n  grDevices::colorRampPalette(pal, ...)\n}\n\ndubois_pal_c(palette = \"light\", reverse = TRUE)(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"#FFFFFF\" \"#C1759D\" \"#582F6C\"\n```\n:::\n:::\n\n## Build Your Own `scale_color|fill_*_c()`\n\n::: {.cell hash='06_colors_cache/revealjs/dubois-scale-continuous-functions_69d0f1bca9b5d985bb8cca5ca3add69a'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7|9,10,11,12,13,14,15|2,10|4,12|6,14|\"}\nscale_fill_dubois_c <- function(palette = \"dark\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"dark\", \"light\")) stop('Palette should be \"dark\" or \"light\".')\n\n  pal <- dubois_pal_c(palette = palette, reverse = reverse)\n\n  ggplot2::scale_fill_gradientn(colours = pal(256), ...)\n}\n\nscale_color_dubois_c <- function(palette = \"dark\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"dark\", \"light\")) stop('Palette should be \"dark\" or \"light\".')\n\n  pal <- dubois_pal_c(palette = palette, reverse = reverse)\n\n  ggplot2::scale_color_gradientn(colours = pal(256), ...)\n}\n```\n:::\n\n## Use Your Own `scale_color|fill_*_c()`\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/dubois-scales-color-c-use-1_6bd557da414e8bb234de5ecd784fb721'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,7|7,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_dubois_c()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/dubois-scales-color-c-use-1-1.png){width=1500}\n:::\n:::\n\n## Use Your Own `scale_color|fill_*_c()`\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/dubois-scales-color-c-use-2_a8ab12feb6b2a7078a12c2fd7c4ada1e'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,7|7,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_dubois_c(\n    palette = \"light\",\n    reverse = TRUE\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/dubois-scales-color-c-use-2-1.png){width=1500}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.3.5/countdown.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/countdown-0.3.5/countdown.js\"></script>\r\n"
      ],
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n\r\n      // dispatch for htmlwidgets\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for reveal\r\n    if (window.Reveal) {\r\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\r\n        fireSlideChanged(event.previousSlide, event.currentSlide);\r\n      });\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}