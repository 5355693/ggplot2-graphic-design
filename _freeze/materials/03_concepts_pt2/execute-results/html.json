{
  "hash": "a661a9477f3f6838efe91ad28cfcee1f",
  "result": {
    "markdown": "---\ntitle: \"Graphic Design with ggplot2\"\nsubtitle: \"<span style='font-size:1.75em;line-height:1.1;'>Concepts of the <code>{ggplot2}</code> Package Pt. 2:<br><span style='font-weight:500;'>Facets, Scales, and Coordinate Systems</span></span>\"\nauthor: \"<b style='color:#28a87d;'>Cédric Scherer</b> **//** rstudio::conf **//** July 2022\"\nformat:\n  revealjs:\n    theme: css/style.scss\n    footer: '**[Cédric Scherer](https::/cedricscherer.com) //** rstudio::conf **//** July 2022'\n    #'rstudio::conf(workshop = \"Graphic Design with ggplot2\", instructor = \"Cédric Scherer\")'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\n    mainfont: Cabinet Grotesk\neditor: source\nknitr:\n  opts_chunk:\n    dev: \"ragg_png\"\n    retina: 1\n    dpi: 300\nexecute:\n  freeze: auto\n  cache: true\n  echo: true\n  fig-width: 5\n  fig-height: 6\n---\n\n\n## Setup\n\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/prep_d2a657ac11dddd46f0db07b9137f75b2'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nbikes <- readr::read_csv(\n  here::here(\"data\", \"london-bikes-custom.csv\"),\n  col_types = \"Dcfffilllddddc\"\n)\n\nbikes$season <- forcats::fct_inorder(bikes$season)\n\ntheme_set(theme_light(base_size = 14, base_family = \"Roboto Condensed\"))\n\ntheme_update(\n  panel.grid.minor = element_blank(),\n  plot.title = element_text(face = \"bold\"),\n  legend.position = \"top\",\n  plot.title.position = \"plot\"\n)\n```\n:::\n\n\n# Facets\n\n## Facets\n\n<br>\n\n<b class='simple-highlight-grn' style='font-size:2.6rem;'>= split variables to multiple panels</b><br><br>\n\n::: fragment\nFacets are also known as:\n\n-   small multiples\n-   trellis graphs\n-   lattice plots\n-   conditioning\n:::\n\n------------------------------------------------------------------------\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/facet-types-wrap_0fcf1e92c9eb0199a6161d0a644e4f32'}\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-types-wrap-1.png){width=1500}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/facet-types-grid_602424fd91a466ad09329649c78e188d'}\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-types-grid-1.png){width=1500}\n:::\n:::\n\n:::\n:::\n\n## Setup\n\n\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-setup_2fa964fbb76d6d88f88acdd6ad1297ea'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7,8,9,10|12\"}\ng <-\n  ggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = season)\n  ) +\n  geom_point(\n    alpha = .3,\n    guide = \"none\"\n  )\n\ng\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-setup-1.png){width=1500}\n:::\n:::\n\n\n## Wrapped Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-wrap_51c0d2607259c698e53bcd42ef9d9f10'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3|3\"}\ng +\n  facet_wrap(\n    vars(day_night)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-wrap-1.png){width=1500}\n:::\n:::\n\n\n## Wrapped Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-wrap-circumflex_89dc1d8d5c0747a0da1f5a2714606856'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ng +\n  facet_wrap(\n    ~ day_night\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-wrap-circumflex-1.png){width=1500}\n:::\n:::\n\n\n## Facet Multiple Variables\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-wrap-multiple_2ef3904d07f901766a3bb95d5a3b2048'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ng +\n  facet_wrap(\n    ~ is_workday + day_night\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-wrap-multiple-1.png){width=1500}\n:::\n:::\n\n\n## Facet Options: Cols + Rows\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-wrap-options-ncol_10287c15aa45f8ac6bc93d7185e789dc'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\ng +\n  facet_wrap(\n    ~ day_night,\n    ncol = 1\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-wrap-options-ncol-1.png){width=1500}\n:::\n:::\n\n\n## Facet Options: Free Scaling\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-wrap-options-scales_160f1c8828cd77b379e1750f52e8be51'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\ng +\n  facet_wrap(\n    ~ day_night,\n    ncol = 1,\n    scales = \"free\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-wrap-options-scales-1.png){width=1500}\n:::\n:::\n\n\n## Facet Options: Free Scaling\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-wrap-options-freey_155120f7cc8101738aee647f4bd8ae50'}\n\n```{.r .cell-code  code-line-numbers=\"4,5\"}\ng +\n  facet_wrap(\n    ~ day_night,\n    ncol = 1,\n    scales = \"free_y\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-wrap-options-freey-1.png){width=1500}\n:::\n:::\n\n\n## Facet Options: Switch Labels\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-wrap-options-switch_2c4f4ac309f05f81d064beaadba464a5'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\ng +\n  facet_wrap(\n    ~ day_night,\n    ncol = 1,\n    switch = \"x\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-wrap-options-switch-1.png){width=1500}\n:::\n:::\n\n\n## Gridded Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-grid_bd1e84962f0c4ad243d6b3a452568722'}\n\n```{.r .cell-code  code-line-numbers=\"3,4\"}\ng +\n  facet_grid(\n    rows = vars(day_night),\n    cols = vars(is_workday)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-grid-1.png){width=1500}\n:::\n:::\n\n\n## Gridded Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-grid-circumflex_3665e81ca519150bd15bf825c171414f'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ng +\n  facet_grid(\n    day_night ~ is_workday\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-grid-circumflex-1.png){width=1500}\n:::\n:::\n\n\n## Facet Multiple Variables\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-grid-multiple_981e40c97d1e157db6917a2e5e3547f3'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ng +\n  facet_grid(\n    day_night ~ is_workday + season\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-grid-multiple-1.png){width=1500}\n:::\n:::\n\n\n## Facet Options: Free Scaling\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-grid-options-scales_e8fda1ff0b5d8b10abadebbfdf847939'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\ng +\n  facet_grid(\n    day_night ~ is_workday,\n    scales = \"free\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-grid-options-scales-1.png){width=1500}\n:::\n:::\n\n\n## Facet Options: Switch Labels\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-grid-options-switch_1984c11c71a3fa4f9fa739aa4c02bf33'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\ng +\n  facet_grid(\n    day_night ~ is_workday,\n    scales = \"free\",\n    switch = \"y\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-grid-options-switch-1.png){width=1500}\n:::\n:::\n\n\n## Facet Options: Proportional Spacing\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-grid-options-space_19393be08cecc37db470948131b5e185'}\n\n```{.r .cell-code  code-line-numbers=\"4,5|5\"}\ng +\n  facet_grid(\n    day_night ~ is_workday,\n    scales = \"free\",\n    space = \"free\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-grid-options-space-1.png){width=1500}\n:::\n:::\n\n\n## Facet Options: Proportional Spacing\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/facet-grid-options-space-y_9c89e9c618ae3ef4b960d85c0ccd2231'}\n\n```{.r .cell-code  code-line-numbers=\"4,5\"}\ng +\n  facet_grid(\n    day_night ~ is_workday,\n    scales = \"free_y\",\n    space = \"free_y\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/facet-grid-options-space-y-1.png){width=1500}\n:::\n:::\n\n\n## Your Turn!\n\n::: question\n**Create the following facet from the `diamonds` data**.\n\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/exercise-facets_f8694d2099173f85fb27bfdd4618e113'}\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/exercise-facets-1.png){width=1500}\n:::\n:::\n\n:::\n\n## Your Turn!\n\n::: question\n<b style=\"color:#5DB699;\">Bonus: Create this bloody-dark version.</b>\n\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/exercise-facets-bonus_aac8c4dab553eeb845ebac91a7aabf0c'}\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/exercise-facets-bonus-1.png){width=1500}\n:::\n:::\n\n:::\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/diamonds-facet-start_3fd8f4c09770c07c9e9fa5284d751814'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7,8,9,10,11,12|8,9,10\"}\nggplot(\n    diamonds,\n    aes(x = carat, y = price)\n  ) +\n  geom_point(\n    alpha = .3\n  ) +\n  geom_smooth(\n    method = \"lm\",\n    se = FALSE,\n    color = \"dodgerblue\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/diamonds-facet-start-1.png){width=1500}\n:::\n:::\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/diamonds-facet_8737398823e0a8b716745f578736f3f0'}\n\n```{.r .cell-code  code-line-numbers=\"13,14,15,16,17\"}\nggplot(\n    diamonds,\n    aes(x = carat, y = price)\n  ) +\n  geom_point(\n    alpha = .3\n  ) +\n  geom_smooth(\n    method = \"lm\",\n    se = FALSE,\n    color = \"dodgerblue\"\n  ) +\n  facet_grid(\n    cut ~ clarity,\n    space = \"free_x\",\n    scales = \"free_x\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/diamonds-facet-1.png){width=1500}\n:::\n:::\n\n\n## Diamonds Facet (Dark Theme Bonus)\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/diamonds-facet-dark_52736a20ef37c5a30fd8586c30d1e24f'}\n\n```{.r .cell-code  code-line-numbers=\"19,20,21,22\"}\nggplot(\n    diamonds,\n    aes(x = carat, y = price)\n  ) +\n  geom_point(\n    alpha = .3,\n    color = \"white\"\n  ) +\n  geom_smooth(\n    method = \"lm\",\n    se = FALSE,\n    color = \"dodgerblue\"\n  ) +\n  facet_grid(\n    cut ~ clarity,\n    space = \"free_x\",\n    scales = \"free_x\"\n  ) +\n  theme_dark(\n    base_size = 14,\n    base_family = \"Roboto Condensed\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/diamonds-facet-dark-1.png){width=1500}\n:::\n:::\n\n\n# Scales\n\n\n\n\n\n## Scales\n\n<br>\n\n<b class='simple-highlight-grn' style='font-size:2.6rem;'>= translate between variable ranges and property ranges</b><br><br>\n\n::: incremental\n-   feels-like temperature  ⇄  x\n-   reported bike shares  ⇄  y\n-   season  ⇄  color\n-   year  ⇄  shape\n-   ...\n:::\n\n## Scales\n\nThe `scale_*()` components control the properties of all the<br><b class='simple-highlight-ylw'>aesthetic dimensions mapped to the data.</b>\n\n<br>Consequently, there are `scale_*()` functions for all aesthetics such as:\n\n-   **positions** via `scale_x_*()` and `scale_y_*()`\n\n-   **colors** via `scale_color_*()` and `scale_fill_*()`\n\n-   **sizes** via `scale_size_*()` and `scale_radius_*()`\n\n-   **shapes** via `scale_shape_*()` and `scale_linetype_*()`\n\n-   **transparency** via `scale_alpha_*()`\n\n## Scales\n\nThe `scale_*()` components control the properties of all the<br><b class='simple-highlight-ylw'>aesthetic dimensions mapped to the data.</b>\n\n<br>The extensions (`*`) can be filled by e.g.:\n\n-   `continuous()`, `discrete()`, `reverse()`, `log10()`, `sqrt()`, `date()` for positions\n\n-   `continuous()`, `discrete()`, `manual()`, `gradient()`, `gradient2()`, `brewer()` for colors\n\n-   `continuous()`, `discrete()`, `manual()`, `ordinal()`, `area()`, `date()` for sizes\n\n-   `continuous()`, `discrete()`, `manual()`, `ordinal()` for shapes\n\n-   `continuous()`, `discrete()`, `manual()`, `ordinal()`, `date()` for transparency\n\n------------------------------------------------------------------------\n\n![Illustration by [Allison Horst](https://github.com/allisonhorst/stats-illustrations)](img/concepts/continuous_discrete.png){fig-size=\"120%\" fig-align=\"center\" fig-alt=\"Allison Horsts illustration ofthe correct use of continuous versus discrete; however, in {ggplot2} these are interpeted in a different way: as quantitative and qualitative.\"}\n\n## Continuous vs. Discrete in {ggplot2}\n\n::: {layout-ncol=\"2\"}\n## Continuous:<br>quantitative or numerical data\n\n-   height\n-   weight\n-   age\n-   counts\n\n## Discrete:<br>qualitative or categorical data\n\n-   species\n-   sex\n-   study sites\n-   age group\n:::\n\n## Continuous vs. Discrete in {ggplot2}\n\n::: {layout-ncol=\"2\"}\n## Continuous:<br>quantitative or numerical data\n\n-   height (continuous)\n-   weight (continuous)\n-   age (continuous or discrete)\n-   counts (discrete)\n\n## Discrete:<br>qualitative or categorical data\n\n-   species (nominal)\n-   sex (nominal)\n-   study site (nominal or ordinal)\n-   age group (ordinal)\n:::\n\n## Aesthetics + Scales\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-default-invisible_59e900f939a93da694d71d391835c13c'}\n\n```{.r .cell-code  code-line-numbers=\"3,4\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-default-invisible-1.png){width=1500}\n:::\n:::\n\n\n## Aesthetics + Scales\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-default_baba673f155578047b0ae64eb536e366'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,7,8,9|7,8,9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous() +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-default-1.png){width=1500}\n:::\n:::\n\n\n## Scales\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-overwrite-1_2c6110bcc3f85100151832b4a541146a'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_continuous() +\n  scale_y_continuous() +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-overwrite-1-1.png){width=1500}\n:::\n:::\n\n\n## Scales\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-overwrite-2_e48fba2fdd761fcbe315aac5f6808670'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_continuous() +\n  scale_y_log10() +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-overwrite-2-1.png){width=1500}\n:::\n:::\n\n\n## Scales\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-overwrite-3_783a936fa6fc83f5b3530eb24c22bcf5'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_continuous() +\n  scale_y_log10() +\n  scale_color_viridis_d()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-overwrite-3-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-trans_9d373076c1d31e37bc58a43cad2b60f2'}\n\n```{.r .cell-code  code-line-numbers=\"8,9,10|9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous(\n    trans = \"log10\"\n  ) +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-trans-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-name_919a6cd708d11812b919c007dccc94d5'}\n\n```{.r .cell-code  code-line-numbers=\"8,9,10|9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous(\n    name = \"Reported bike shares\"\n  ) +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-name-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-breaks-seq_af037a3b6c05dff4997fd970c142a70d'}\n\n```{.r .cell-code  code-line-numbers=\"9,10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = seq(0, 60000, by = 15000)\n  ) +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-breaks-seq-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-breaks-short_f63156349cb0d908580521105d45501d'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = 0:4*15000\n  ) +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-breaks-short-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-breaks-irregular_de9c97e070776049677e3ca44dcdcd90'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = c(0, seq(5000, 30000, by = 2500), 40000, 50000)\n  ) +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-breaks-irregular-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-labels_66eda8226123b695d04d19cbae03ecc0'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous(\n    name = \"Reported bike shares in thousands\",\n    breaks = 0:4*15000,\n    labels = 0:4*15\n  ) +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-labels-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-labels-paste_3aa3b6dd5f45496f53ee8cbcd03d2c59'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous(\n    name = \"Reported bike shares in thousands\",\n    breaks = 0:4,\n    labels = paste(0:4*15000, \"bikes\")\n  ) +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-labels-paste-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-limits_30130836438dbf42b98d4f0ea86b9a40'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = 0:4*15000,\n    limits = c(NA, 60000)\n  ) +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-limits-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-expand.no_63b15cdf061e95b3d1d12385b5986637'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = 0:4*15000,\n    expand = c(0, 0)\n  ) +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-expand.no-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-expand_ec9a707566379280b352ddcffa5dadb9'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = -1:5*15000,\n    expand = c(.5, .5)\n  ) +\n  scale_color_discrete()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-expand-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_continuous\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-continuous-guide-none_9078be527d302c7a17c655ef53b40598'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_y_continuous(\n    name = \"Reported bike shares\",\n    breaks = 0:4*15000,\n    guide = \"none\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-continuous-guide-none-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_date\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-date-breaks-months_8ec1f3507f2fb304fef0cced2e79b050'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9,10|9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date(\n    name = NULL,\n    date_breaks = \"3 months\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-date-breaks-months-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_date\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-date-breaks-weeks_8ab445419da2cebabbe2d2506d3525ec'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date(\n    name = NULL,\n    date_breaks = \"20 weeks\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-date-breaks-weeks-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_date\\` with \\`strftime()\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-date-labels_e0d1e458a70c748557bdc1f37852e476'}\n\n```{.r .cell-code  code-line-numbers=\"9,10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date(\n    name = NULL,\n    date_breaks = \"4 months\",\n    date_labels = \"%Y/%m/%d\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-date-labels-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_date\\` with \\`strftime()\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-date-labels-special_ab86d878e3dbeec68d0ad797fbb81a77'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_x_date(\n    name = NULL,\n    date_breaks = \"4 months\",\n    date_labels = \"%b '%y\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-date-labels-special-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_discrete\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-discrete_f94028c3f2cd84bef29979a221a86098'}\n\n```{.r .cell-code  code-line-numbers=\"3,6,7,8,9|7,8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  scale_x_discrete(\n    name = \"Period\",\n    labels = c(\"Dec-Feb\", \"Mar-May\", \"Jun-Aug\", \"Sep-Nov\")\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-discrete-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_x\\|y_discrete\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-discrete-expand_4d5b305f70f9df379164f1fe0a9f8eb6'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  scale_x_discrete(\n    name = \"Season\",\n    expand = c(.5, .5)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-discrete-expand-1.png){width=1500}\n:::\n:::\n\n\n## Discrete or Continuous?\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-fake-discrete-visible_b7e09a61e62f68dec9ae9759089babcb'}\n\n```{.r .cell-code  code-line-numbers=\"3,5,6,7\"}\nggplot(\n    bikes,\n    aes(x = as.numeric(season), y = count)\n  ) +\n  geom_boxplot(\n    aes(group = season)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-fake-discrete-visible-1.png){width=1500}\n:::\n:::\n\n\n## Discrete or Continuous?\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-fake-discrete_e759a33cfa5c312e7ffeac337864e263'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11,12,13|11|12\"}\nggplot(\n    bikes,\n    aes(x = as.numeric(season),\n        y = count)\n  ) +\n  geom_boxplot(\n    aes(group = season)\n  ) +\n  scale_x_continuous(\n    name = \"Season\",\n    breaks = 1:4,\n    labels = levels(bikes$season)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-fake-discrete-1.png){width=1500}\n:::\n:::\n\n\n## Discrete or Continuous?\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-xy-fake-discrete-shift_4e82d9abaf4979cd0beb8e8203627bef'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(\n    bikes,\n    aes(x = as.numeric(season) + as.numeric(season) / 8,\n        y = count)\n  ) +\n  geom_boxplot(\n    aes(group = season)\n  ) +\n  scale_x_continuous(\n    name = \"Season\",\n    breaks = 1:4,\n    labels = levels(bikes$season)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-xy-fake-discrete-shift-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_color\\|fill_discrete\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-color-discrete-type-vector_760b66d1c0e69463daa9f490672be461'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9,10|8,9\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_discrete(\n    name = \"Season:\",\n    type = c(\"#69b0d4\", \"#00CB79\", \"#F7B01B\", \"#a78f5f\")\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-color-discrete-type-vector-1.png){width=1500}\n:::\n:::\n\n\n## Inspect Assigned Colors\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-color-discrete-type-inspect_dffca23131615b05a5532404251c4953'}\n\n```{.r .cell-code  code-line-numbers=\"1|12|14\"}\ng <- ggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_discrete(\n    name = \"Season:\",\n    type = c(\"#3ca7d9\", \"#1ec99b\", \"#F7B01B\", \"#bb7e8f\")\n  )\n\ngb <- ggplot_build(g)\n\ngb$data[[1]][1:10,]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    colour     x     y PANEL group shape size fill alpha stroke\n1  #3ca7d9 16439  6830     1     1    19  1.5   NA    NA    0.5\n2  #3ca7d9 16439  2404     1     1    19  1.5   NA    NA    0.5\n3  #3ca7d9 16440 14763     1     1    19  1.5   NA    NA    0.5\n4  #3ca7d9 16440  5609     1     1    19  1.5   NA    NA    0.5\n5  #3ca7d9 16441 14501     1     1    19  1.5   NA    NA    0.5\n6  #3ca7d9 16441  6112     1     1    19  1.5   NA    NA    0.5\n7  #3ca7d9 16442 16358     1     1    19  1.5   NA    NA    0.5\n8  #3ca7d9 16442  4706     1     1    19  1.5   NA    NA    0.5\n9  #3ca7d9 16443  9971     1     1    19  1.5   NA    NA    0.5\n10 #3ca7d9 16443  5630     1     1    19  1.5   NA    NA    0.5\n```\n:::\n:::\n\n\n## \\`scale_color\\|fill_discrete\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-color-discrete-type-vector-named_e97cb321f0661a975708dff68b6f7225'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6|1,16\"}\nmy_colors <- c(\n  `winter` = \"#3c89d9\",\n  `spring` = \"#1ec99b\",\n  `summer` = \"#F7B01B\",\n  `autumn` = \"#a26e7c\"\n)\n\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_discrete(\n    name = \"Season:\",\n    type = my_colors\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-color-discrete-type-vector-named-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_color\\|fill_discrete\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-color-discrete-type-vector-named-shuffled_6a67b0d6a31aca26969ed37af9a88efb'}\n\n```{.r .cell-code  code-line-numbers=\"2,5|1,16\"}\nmy_colors_alphabetical <- c(\n  `autumn` = \"#a26e7c\",\n  `spring` = \"#1ec99b\",\n  `summer` = \"#F7B01B\",\n  `winter` = \"#3c89d9\"\n)\n\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_discrete(\n    name = \"Season:\",\n    type = my_colors_alphabetical\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-color-discrete-type-vector-named-shuffled-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_color\\|fill_discrete\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-color-discrete-type-palette_f17138d2f4844cb18c94c948f2853d05'}\n\n```{.r .cell-code  code-line-numbers=\"1|11,12,13\"}\nlibrary(RColorBrewer)\n\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = season)\n  ) +\n  geom_point() +\n  scale_color_discrete(\n    name = \"Season:\",\n    type = brewer.pal(\n      n = 4, name = \"Dark2\"\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-color-discrete-type-palette-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_color\\|fill_manual\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-color-manual-na_a3c60a579d5e61dec91acdf5eaf895d2'}\n\n```{.r .cell-code  code-line-numbers=\"4,9,10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = weather_type)\n  ) +\n  geom_point() +\n  scale_color_manual(\n    name = \"Season:\",\n    values = brewer.pal(n = 6, name = \"Pastel1\"),\n    na.value = \"black\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-color-manual-na-1.png){width=1500}\n:::\n:::\n\n\n## \\`scale_color\\|fill_carto_d\\`\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/scales-color-discrete-carto_d773a31ab6f89f9481e75ac94433d9b6'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9,10\"}\nggplot(\n    bikes,\n    aes(x = date, y = count,\n        color = weather_type)\n  ) +\n  geom_point() +\n  rcartocolor::scale_color_carto_d(\n    name = \"Season:\",\n    palette = \"Pastel\",\n    na.value = \"black\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scales-color-discrete-carto-1.png){width=1500}\n:::\n:::\n\n\n## Your Turn!\n\n::: question\n**Modify our diamonds facet like this:**\n\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/exercise-scales_73be765f77409b81adf113d04861db05'}\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/exercise-scales-1.png){width=1500}\n:::\n:::\n\n:::\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/diamonds-facet-store_5cbf1f99d80a6058fdf791f14216beec'}\n\n```{.r .cell-code  code-line-numbers=\"1|10|20\"}\nfacet <-\n  ggplot(\n    diamonds,\n    aes(x = carat, y = price)\n  ) +\n  geom_point(\n    alpha = .3\n  ) +\n  geom_smooth(\n    aes(color = cut),\n    method = \"lm\",\n    se = FALSE\n  ) +\n  facet_grid(\n    cut ~ clarity,\n    space = \"free_x\",\n    scales = \"free_x\"\n  )\n\nfacet\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/diamonds-facet-store-1.png){width=1500}\n:::\n:::\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/diamonds-facet-scales-xy_81012c1cecc8f721631bb5f053b3376d'}\n\n```{.r .cell-code}\nfacet +\n  scale_x_continuous(\n    breaks = 0:5\n  ) +\n  scale_y_continuous(\n    limits = c(0, 30000),\n    breaks = 0:3*10000,\n    labels = c(\"$0\", \"$10,000\", \"$20,000\", \"$30,000\")\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/diamonds-facet-scales-xy-1.png){width=1500}\n:::\n:::\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/diamonds-facet-scales-y-paste-format_86bf214771c9938761d9e696728fd10f'}\n\n```{.r .cell-code  code-line-numbers=\"8,9,10\"}\nfacet +\n  scale_x_continuous(\n    breaks = 0:5\n  ) +\n  scale_y_continuous(\n    limits = c(0, 30000),\n    breaks = 0:3*10000,\n    labels = paste0(\n      \"$\", format(0:3*10000, big.mark = \",\", trim = TRUE)\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/diamonds-facet-scales-y-paste-format-1.png){width=1500}\n:::\n:::\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/diamonds-facet-scales-y-function_60f92cbd3ecd42b86b3fe00319d876e2'}\n\n```{.r .cell-code  code-line-numbers=\"8,9,10\"}\nfacet +\n  scale_x_continuous(\n    breaks = 0:5\n  ) +\n  scale_y_continuous(\n    limits = c(0, 30000),\n    breaks = 0:3*10000,\n    labels = function(y) paste0(\n      \"$\", format(y, big.mark=\",\", trim = TRUE)\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/diamonds-facet-scales-y-function-1.png){width=1500}\n:::\n:::\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/diamonds-facet-scales-y-dollar-format_bb77c23f66efb3430a4fd1849e011978'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nfacet +\n  scale_x_continuous(\n    breaks = 0:5\n  ) +\n  scale_y_continuous(\n    limits = c(0, 30000),\n    breaks = 0:3*10000,\n    labels = scales::dollar_format()\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/diamonds-facet-scales-y-dollar-format-1.png){width=1500}\n:::\n:::\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/diamonds-facet-scales-color_e81586ee386cd573ab225670ca13493e'}\n\n```{.r .cell-code  code-line-numbers=\"10,11,12,13\"}\nfacet +\n  scale_x_continuous(\n    breaks = 0:5\n  ) +\n  scale_y_continuous(\n    limits = c(0, 30000),\n    breaks = 0:3*10000,\n    labels = scales::dollar_format()\n  ) +\n  scale_color_brewer(\n    palette = \"Set2\",\n    guide = \"none\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/diamonds-facet-scales-color-1.png){width=1500}\n:::\n:::\n\n\n## Diamonds Facet\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/diamonds-facet-scales-no-legend_c23225942e6fbcce49b565168b094fa2'}\n\n```{.r .cell-code  code-line-numbers=\"13,14,15\"}\nfacet +\n  scale_x_continuous(\n    breaks = 0:5\n  ) +\n  scale_y_continuous(\n    limits = c(0, 30000),\n    breaks = 0:3*10000,\n    labels = scales::dollar_format()\n  ) +\n  scale_color_brewer(\n    palette = \"Set2\"\n  ) +\n  theme(\n    legend.position = \"none\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/diamonds-facet-scales-no-legend-1.png){width=1500}\n:::\n:::\n\n\n# Coordinate Systems\n\n## Coordinate Systems\n\n<br>\n\n<b class='simple-highlight-grn' style='font-size:2.6rem;'>= interpret the position aesthetics</b><br><br>\n::: incremental\n-   **linear coordinate systems:** preserve the geometrical shapes\n    -   `coord_cartesian()`\n    -   `coord_fixed()`\n    -   `coord_flip()`\n-   **non-linear coordinate systems:** likely change the geometrical shapes\n    -   `coord_polar()`\n    -   `coord_map()` and `coord_sf()`\n    -   `coord_trans()`\n:::\n\n## Cartesian Coordinate System\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-cartesian_a80393af217790ed70dbce81903066fb'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-cartesian-1.png){width=1500}\n:::\n:::\n\n\n## Cartesian Coordinate System\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-cartesian-zoom_8ac959595d639e4471f7b2a68c23cab8'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  coord_cartesian(\n    ylim = c(NA, 15000)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-cartesian-zoom-1.png){width=1500}\n:::\n:::\n\n\n## Changing Limits\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-cartesian-ylim_73aa25a74d58ec679e6bf711e1dead51'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  coord_cartesian(\n    ylim = c(NA, 15000)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-cartesian-ylim-1.png){width=1500}\n:::\n:::\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/scale-y-limits_1456e7de919da3c6dffbbfa86a259b37'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  scale_y_continuous(\n    limits = c(NA, 15000)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/scale-y-limits-1.png){width=1500}\n:::\n:::\n\n:::\n\n## Clipping\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-clip_4348d0f0ad26c55c736dded34cc687fc'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  geom_boxplot() +\n  coord_cartesian(\n    ylim = c(NA, 15000),\n    clip = \"off\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-clip-1.png){width=1500}\n:::\n:::\n\n\n## Clipping\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-clip-text_0dffa940666aa49f2f897e7a70463f33'}\n\n```{.r .cell-code  code-line-numbers=\"2,3|6,7,8,9,10|12\"}\nggplot(\n    filter(bikes, is_holiday == TRUE),\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point() +\n  geom_text(\n    aes(label = season),\n    nudge_x = .3,\n    hjust = 0\n  ) +\n  coord_cartesian(\n    clip = \"off\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-clip-text-1.png){width=1500}\n:::\n:::\n\n\n## ... or better use {ggrepel}\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-clip-text-repel_fc3df594b724f49326b048c527a278df'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    filter(bikes, is_holiday == TRUE),\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point() +\n  ggrepel::geom_text_repel(\n    aes(label = season),\n    nudge_x = .3,\n    hjust = 0\n  ) +\n  coord_cartesian(\n    clip = \"off\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-clip-text-repel-1.png){width=1500}\n:::\n:::\n\n\n## Remove All Padding\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-expand-off-clip_ef2da1939f4fb0f7e05b29fd5790c2f5'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point() +\n  coord_cartesian(\n    expand = FALSE,\n    clip = \"off\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-expand-off-clip-1.png){width=1500}\n:::\n:::\n\n\n## Fixed Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-fixed_b89665deebc81fd87e50147d28f3cf45'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = temp)\n  ) +\n  geom_point() +\n  coord_fixed()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-fixed-1.png){width=1500}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-fixed-custom_09d291699edef131223d2053ac881078'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = temp)\n  ) +\n  geom_point() +\n  coord_fixed(ratio = 4)\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-fixed-custom-1.png){width=1500}\n:::\n:::\n\n:::\n:::\n\n## Flipped Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-cartesian-comp-flip_694c4eb3bc2690eb7a55a3899293ccbe'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = weather_type)\n  ) +\n  geom_bar() +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-cartesian-comp-flip-1.png){width=1500}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-flip_5bc3842ffd48181f6fac78ff3d76ac58'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = weather_type)\n  ) +\n  geom_bar() +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-flip-1.png){width=1500}\n:::\n:::\n\n:::\n:::\n\n## Flipped Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-cartesian-switch-x-y_f81f590a080a7cbc4b2271440f204e07'}\n\n```{.r .cell-code  code-line-numbers=\"3,6\"}\nggplot(\n    bikes,\n    aes(y = weather_type)\n  ) +\n  geom_bar() +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-cartesian-switch-x-y-1.png){width=1500}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-flip-again_2b330c51f1c849721fc837b5483dda8e'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = weather_type)\n  ) +\n  geom_bar() +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-flip-again-1.png){width=1500}\n:::\n:::\n\n:::\n:::\n\n## Reminder: Sort Your Bars!\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/forcats-sort-infreq_7c2d69356b379a599eccecd19dc3f94d'}\n\n```{.r .cell-code  code-line-numbers=\"3|2\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(y = fct_infreq(weather_type))\n  ) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/forcats-sort-infreq-1.png){width=1500}\n:::\n:::\n\n\n## Reminder: Sort Your Bars!\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/forcats-sort-infreq-rev_80ed4bc2ea744bdb8b5e7a49d02ee530'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,5\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(y = fct_rev(\n      fct_infreq(weather_type)\n    ))\n  ) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/forcats-sort-infreq-rev-1.png){width=1500}\n:::\n:::\n\n\n## Circular Corrdinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-polar_3de44b91328783af73f6c392c8e02d3d'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(x = weather_type,\n        fill = weather_type)\n  ) +\n  geom_bar() +\n  coord_polar()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-polar-1.png){width=1500}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-cartesian-comp-polar_0027cef0e2a0dacb17916ac9176aacbe'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(x = weather_type,\n        fill = weather_type)\n  ) +\n  geom_bar() +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-cartesian-comp-polar-1.png){width=1500}\n:::\n:::\n\n:::\n:::\n\n## Circular Corrdinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-polar-coxcomb_34a23699f5151dfb95c606c49db07a30'}\n\n```{.r .cell-code  code-line-numbers=\"6,7\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(x = fct_infreq(weather_type),\n        fill = weather_type)\n  ) +\n  geom_bar(width = 1) +\n  coord_polar()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-polar-coxcomb-1.png){width=1500}\n:::\n:::\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-cartesian-comp-polar-no-padding_6574c13c1b2eec39762ca9b6b1fb9bfc'}\n\n```{.r .cell-code  code-line-numbers=\"6,7\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(x = fct_infreq(weather_type),\n        fill = weather_type)\n  ) +\n  geom_bar(width = 1) +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-cartesian-comp-polar-no-padding-1.png){width=1500}\n:::\n:::\n\n:::\n\n## Circular Corrdinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-polar-theta-x_04465e0e7eb9412301ba04a6382d5c42'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(x = fct_infreq(weather_type),\n        fill = weather_type)\n  ) +\n  geom_bar() +\n  coord_polar(theta = \"x\")\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-polar-theta-x-1.png){width=1500}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-polar-theta-y_a29b4ff864478f64db4e0c100cbe9070'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(x = fct_infreq(weather_type),\n        fill = weather_type)\n  ) +\n  geom_bar() +\n  coord_polar(theta = \"y\")\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-polar-theta-y-1.png){width=1500}\n:::\n:::\n\n:::\n:::\n\n## Circular Corrdinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-polar-pie_7b5e1d24f6476f4b895866ac658462be'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(x = 1,\n        fill = fct_rev(fct_infreq(weather_type)))\n  ) +\n  geom_bar(position = \"stack\") +\n  coord_polar(theta = \"y\")\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-polar-pie-1.png){width=1500}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/coord-cartesian-comp-polar-stacked_bf9a4fb3cedfb168f6d4b255422962b6'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(x = 1,\n        fill = fct_rev(fct_infreq(weather_type)))\n  ) +\n  geom_bar(position = \"stack\") +\n  coord_cartesian()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-cartesian-comp-polar-stacked-1.png){width=1500}\n:::\n:::\n\n:::\n:::\n\n## Transform a Coordinate System\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-trans-log_35913483c87623dd94c6f985bc23f908'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp, y = count)\n  ) +\n  geom_point() +\n  coord_trans(y = \"log10\")\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-trans-log-1.png){width=1500}\n:::\n:::\n\n\n## Transform a Coordinate System\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/trans-log-via-coord_3e46ce07bc2a1f5bb3da6fe6ba535d78'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp, y = count,\n        group = day_night)\n  ) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  coord_trans(y = \"log10\")\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/trans-log-via-coord-1.png){width=1500}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/trans-log-via-scale_95ce00c9e820e9b21494d55b18219cf5'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp, y = count,\n        group = day_night)\n  ) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  scale_y_log10()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/trans-log-via-scale-1.png){width=1500}\n:::\n:::\n\n:::\n:::\n\n## <b style='color:#663399;'>Recap</b>\n\n::: recap\n::: incremental\n-   **`facet_*()`** functions allow to create small multiples\n-   **`scale_*()`** functions translate between `aes`thetics and properties\n-   use **`*_continuous()`** for numerical data\n-   ... and **`*_discrete()`** for categorical data\n-   use **`scale_color|fill_*()`** to customize data-related colors\n-   **`coord_*()`** functions interpret the positional aesthetics\n    -   e.g. create polar plots or work with spatial projections \n-   be careful when adjusting axis limits:\n    -   `scale_*_continuous(limits)` removes the data outside the range\n    -   `coord_*(*lim)` keeps the data and zooms into the range\n:::\n:::\n\n# Exercises\n\n## Exercise 1\n\n::: question\n-   Have a look at the following visualization of the cumulative time that cosmo- and astronauts have spent in outer space. The data also contains information on the year of their first and last travel, respectively.\n-   Together with your group, discuss which layers and modifications are needed to create such a chart with `{ggplot2}`.\n-   Note down the aesthetics, geometries, and scales used for each element of this graphic.\n-   What is the coordinate system? Have any adjustments been made?\n-   Which theme was used and how was it modified?\n:::\n\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/countdown-ex1_2d67cb761b8a443a045923a43b0d0c12'}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_62f3ac1e\" style=\"right:0;bottom:0;font-size:.5em;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n##  {background-image=\"img/exercises/astronaut-viz-detail.png\" background-position=\"center\" background-size=\"61%\"}\n\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/countdown-ex1-viz_38b662a4142eeaa4ed8728e3c29bb885'}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_62f3ac1b\" style=\"right:0;bottom:0;font-size:.5em;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n##  {background-image=\"img/exercises/exercise-what-now.png\" background-position=\"center\" background-size=\"65%\"}\n\n## Exercise 2\n\n::: question\n-   Open the script `exercises/03_concepts_pt2_ex2.qmd`.\n-   Create a circular lollipop plot of reported bike shares per season.\n-   The data is not in the right format as there are no totals.<br>How can you solve it?\n-   Remove all legend elements (with a single line of code).\n-   How can you add the labels next to the starting point of each lollipop?\n-   How could you add a baseline?\n:::\n\n\n::: {.cell hash='03_concepts_pt2_cache/revealjs/countdown-ex2_ee80f129d444e1b1efee967da584e177'}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_62f3acb9\" style=\"right:0;bottom:0;font-size:.5em;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">30</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\n##  {background-image=\"img/exercises/concepts-pt2-exercise-2-1-1.png\" background-position=\"center\" background-size=\"45%\"}\n\n::: footer\n:::\n\n##  {background-image=\"img/exercises/concepts-pt2-exercise-2-2-1.png\" background-position=\"center\" background-size=\"45%\"}\n\n::: footer\n:::\n\n##  {background-image=\"img/exercises/concepts-pt2-exercise-2-3-1.png\" background-position=\"center\" background-size=\"45%\"}\n\n::: footer\n:::\n\n##  {background-image=\"img/exercises/concepts-pt2-exercise-2-5-1.png\" background-position=\"center\" background-size=\"45%\"}\n\n::: footer\n:::\n\n##  {background-image=\"img/exercises/concepts-pt2-exercise-2-7-1.png\" background-position=\"center\" background-size=\"45%\"}\n\n::: footer\n:::\n\n##  {background-image=\"img/exercises/concepts-pt2-exercise-2-8-1.png\" background-position=\"center\" background-size=\"45%\"}\n\n::: footer\n:::\n\n\n##  {background-image=\"img/exercises/exercise-what-now.png\" background-position=\"center\" background-size=\"65%\"}\n\n\n\n# Appendix\n\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-sf_ab0dd6a53b508388d3158eeb35b96300'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3\"}\ncountries <- rnaturalearth::ne_countries(\n  returnclass = \"sf\"\n)\n\nggplot() +\n  geom_sf(\n    data = countries,\n    color = \"#79dfbd\",\n    fill = \"#28a87d\",\n    size = .3\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-sf-1.png){width=1500}\n:::\n:::\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-sf-mollweide_0040c3c4576d4fb893a3aa3dbd943174'}\n\n```{.r .cell-code  code-line-numbers=\"8,9,10\"}\nggplot() +\n  geom_sf(\n    data = countries,\n    color = \"#79dfbd\",\n    fill = \"#28a87d\",\n    size = .3\n  ) +\n  coord_sf(\n    crs = \"+proj=moll\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-sf-mollweide-1.png){width=1500}\n:::\n:::\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-sf-bonne_6bc5a71cc6df001bb3d87cbe8b31ffe8'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot() +\n  geom_sf(\n    data = countries,\n    color = \"#79dfbd\",\n    fill = \"#28a87d\",\n    size = .3\n  ) +\n  coord_sf(\n    crs = \"+proj=bonne +lat_1=10\"\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-sf-bonne-1.png){width=1500}\n:::\n:::\n\n\n## Spatial Coordinate (Reference) Systems\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-sf-bonne-ocean_6d9760376c473c7477ba20458eab2b18'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3|6,7,8,9|19\"}\noceans <- rnaturalearth::ne_download(\n  category = \"physical\", type = \"ocean\", returnclass = \"sf\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nOGR data source with driver: ESRI Shapefile \nSource: \"C:\\Users\\DataVizard\\AppData\\Local\\Temp\\Rtmp2ZHl3I\", layer: \"ne_110m_ocean\"\nwith 2 features\nIt has 3 fields\n```\n:::\n\n```{.r .cell-code  code-line-numbers=\"1,2,3|6,7,8,9|19\"}\nggplot() +\n  geom_sf(\n    data = oceans,\n    fill = \"#d8f1f6\"\n  ) +\n  geom_sf(\n    data = countries,\n    color = \"#79dfbd\",\n    fill = \"#28a87d\",\n    size = .3\n  ) +\n  coord_sf(\n    crs = \"+proj=bonne +lat_1=10\"\n  ) +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-sf-bonne-ocean-1.png){width=1500}\n:::\n:::\n\n\n## Mapping of Visual Properties\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-sf-bonne-ocean-aes_ee1808d594779ceb3c7ff5ad139b39c0'}\n\n```{.r .cell-code  code-line-numbers=\"5,9,16\"}\nggplot() +\n  geom_sf(\n    data = oceans,\n    fill = \"#d8f1f6\",\n    color = \"white\"\n  ) +\n  geom_sf(\n    data = countries,\n    aes(fill = economy),\n    color = \"white\",\n    size = .3\n  ) +\n  coord_sf(\n    crs = \"+proj=bonne +lat_1=10\"\n  ) +\n  scale_fill_viridis_d(option = \"magma\") +\n  theme_void() +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-sf-bonne-ocean-aes-1.png){width=1500}\n:::\n:::\n\n\n## Better Borders\n\n\n::: {.cell output-location='column' hash='03_concepts_pt2_cache/revealjs/coord-sf-bonne-ocean-inner_4e26f0297c02dd8edcd9a00d7bf4e8f5'}\n\n```{.r .cell-code  code-line-numbers=\"1,10,12,13,14,15,16,17\"}\nborders <- rmapshaper::ms_innerlines(countries)\n\nggplot() +\n  geom_sf(\n    data = oceans,\n    fill = \"#d8f1f6\",\n    color = \"white\"\n  ) +\n  geom_sf(\n    data = countries,\n    aes(fill = economy),\n    color = \"transparent\"\n  ) +\n  geom_sf(\n    data = borders,\n    fill = \"transparent\",\n    color = \"white\",\n    size = .3\n  ) +\n  coord_sf(\n    crs = \"+proj=bonne +lat_1=10\"\n  ) +\n  scale_fill_viridis_d(option = \"magma\") +\n  theme_void() +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_files/figure-revealjs/coord-sf-bonne-ocean-inner-1.png){width=1500}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.3.5/countdown.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/countdown-0.3.5/countdown.js\"></script>\r\n"
      ],
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n\r\n      // dispatch for htmlwidgets\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for reveal\r\n    if (window.Reveal) {\r\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\r\n        fireSlideChanged(event.previousSlide, event.currentSlide);\r\n      });\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}