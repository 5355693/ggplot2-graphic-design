{
  "hash": "6a85aa0afaf55cba6fe588e26d9c8b3d",
  "result": {
    "markdown": "---\ntitle: \"Graphic Design with ggplot2\"\nsubtitle: \"<span style='font-size:1.75em;line-height:1.1;'>Concepts of the <code>{ggplot2}</code> Package Pt. 2:<br><span style='font-weight:500;'>Solution Exercise 2</span></span>\"\nauthor: \"<b style='color:#28a87d;'>Cédric Scherer</b> **//** rstudio::conf **//** July 2022\"\nformat:\n  revealjs:\n    theme: css/style.scss\n    footer: '**[Cédric Scherer](https::/cedricscherer.com) //** rstudio::conf **//** July 2022'\n    #'rstudio::conf(workshop = \"Graphic Design with ggplot2\", instructor = \"Cédric Scherer\")'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\n    mainfont: Cabinet Grotesk\neditor: source\nknitr:\n  opts_chunk:\n    dev: \"ragg_png\"\n    retina: 1\n    dpi: 300\nexecute:\n  freeze: auto\n  echo: true\n  fig-width: 5\n  fig-height: 6\n---\n\n\n\n## Exercise 2\n\n::: question\n* Create a circular lollipop plot of reported bike shares per season.\n  - The data is not in the right format as there are no totals.<br>How can you solve it?\n  - Remove all legend elements (with a single line of code).\n  - How can you add the labels next to the starting point of each lollipop?\n  - How could you add a baseline?\n:::\n\n\n------------------------------------------------------------------------\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/ciruclar-lollipop-exercise-1.png){fig-align='center' width=1800}\n:::\n:::\n\n\n\n\n## Preparation\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nbikes <- readr::read_csv(\n  here::here(\"data\", \"london-bikes-custom.csv\"),\n  col_types = \"Dcfffilllddddc\"\n)\n\nbikes$season <- stringr::str_to_title(bikes$season)\nbikes$season <- forcats::fct_inorder(bikes$season)\n\ntheme_set(theme_light(base_size = 14, base_family = \"Roboto Condensed\"))\n```\n:::\n\n\n\n\n## Lollipop Plot with Pre-Calculated Sums\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 2\n  season   count\n  <fct>    <int>\n1 Winter 3520407\n2 Spring 4850236\n3 Summer 6424609\n4 Autumn 5073040\n```\n:::\n:::\n\n\n## Lollipop Plot with Pre-Calculated Sums\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3|4,5,6,7,8\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-pt2-exercise-2-1-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Calculate Sums via `stat_summary()`\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4|5,6,7,8\"}\nggplot(bikes, aes(x = season, y = count)) +\n  stat_summary(\n    geom = \"point\", fun = \"sum\", size = 3\n  ) +\n  stat_summary(\n    geom = \"linerange\", ymin = 0,\n    fun.max = function(y) sum(y)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-exercise-lollipop-cartesian-stat-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Calculate Sums via `stat_summary()`\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(bikes, aes(x = season, y = count)) +\n  stat_summary(\n    geom = \"point\", fun = \"sum\", size = 3\n  ) +\n  stat_summary(\n    geom = \"linerange\", ymin = 0,\n    fun.max = function(y) sum(y)\n  ) +\n  coord_cartesian(ylim = c(0, NA))\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-exercise-lollipop-cartesian-stat-zero-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Apply a Polar Coordinate System\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  ) +\n  coord_polar(theta = \"y\")\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-pt2-exercise-2-2-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Fix Axis Ranges\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"10,11,12,13,14,15\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  ) +\n  coord_polar(theta = \"y\") +\n  scale_x_discrete(\n    expand = c(.5, .5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 7.5*10^6)\n  )\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-pt2-exercise-2-3-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Remove All Theme Components\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"16\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  ) +\n  coord_polar(theta = \"y\") +\n  scale_x_discrete(\n    expand = c(.5, .5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 7.5*10^6)\n  ) +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-pt2-exercise-2-4-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Fix Plot Margin\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"17\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  ) +\n  coord_polar(theta = \"y\") +\n  scale_x_discrete(\n    expand = c(.5, .5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 7.5*10^6)\n  ) +\n  theme_void() +\n  theme(plot.margin = margin(rep(-100, 4)))\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-pt2-exercise-2-5-1.png){width=1500}\n:::\n:::\n\n\n\n## Add \"Axis\" Text\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  ) +\n  geom_text(\n    aes(label = season, y = 0)\n  ) +\n  coord_polar(theta = \"y\") +\n  scale_x_discrete(\n    expand = c(.5, .5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 7.5*10^6)\n  ) +\n  theme_void() +\n  theme(plot.margin = margin(rep(-100, 4)))\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-pt2-exercise-2-6-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Style \"Axis\" Text\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"11,12\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  ) +\n  geom_text(\n    aes(label = season, y = 0),\n    family = \"Cabinet Grotesk\", size = 4.5,\n    fontface = \"bold\", hjust = 1.15\n  ) +\n  coord_polar(theta = \"y\") +\n  scale_x_discrete(\n    expand = c(.5, .5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 7.5*10^6)\n  ) +\n  theme_void() +\n  theme(plot.margin = margin(rep(-100, 4)))\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-pt2-exercise-2-7-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Alternatively: Add Direct Labels\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"14,15,16,17\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  ) +\n  geom_text(\n    aes(label = season, y = 0),\n    family = \"Cabinet Grotesk\", size = 4.5,\n    fontface = \"bold\", hjust = 1.15\n  ) +\n  geom_text(\n    aes(label = paste0(round(count / 10^6, 1), \"M\")),\n    size = 4, vjust = -1, family = \"Cabinet Grotesk\"\n  ) +\n  coord_polar(theta = \"y\") +\n  scale_x_discrete(\n    expand = c(.5, .5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 7.5*10^6)\n  ) +\n  theme_void() +\n  theme(plot.margin = margin(rep(-100, 4)))\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-exercise-lollipop-label-season-direct-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Add a Baseline — *ugly but simple*\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  ) +\n  geom_hline(yintercept = 0) +\n  geom_text(\n    aes(label = season, y = 0),\n    family = \"Cabinet Grotesk\", size = 4.5,\n    fontface = \"bold\", hjust = 1.15\n  ) +\n  coord_polar(theta = \"y\") +\n  scale_x_discrete(\n    expand = c(.5, .5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 7.5*10^6)\n  ) +\n  theme_void() +\n  theme(plot.margin = margin(rep(-100, 4)))\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-exercise-lollipop-baseline-geom-hline-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Add a Baseline — *nice but unusual*\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"4|4,9,10,11\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  ) +\n  geom_linerange(\n    xmin = .7, xmax = 4.3, y = 0\n  ) +\n  geom_text(\n    aes(label = season, y = 0),\n    family = \"Cabinet Grotesk\", size = 4.5,\n    fontface = \"bold\", hjust = 1.15\n  ) +\n  coord_polar(theta = \"y\") +\n  scale_x_discrete(\n    expand = c(.5, .5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 7.5*10^6)\n  ) +\n  theme_void() +\n  theme(plot.margin = margin(rep(-100, 4)))\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-exercise-lollipop-baseline-geom-linerange-1.png){width=1500}\n:::\n:::\n\n\n\n\n## Add a Baseline — *yeah, that's it!*\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"4,9,10,11,12\"}\nbikes %>%\n  group_by(season) %>%\n  summarize(count = sum(count)) %>%\n  ggplot(aes(x = season, y = count)) +\n  geom_point(size = 3) +\n  geom_linerange(\n    aes(ymin = 0, ymax = count)\n  ) +\n  annotate(\n    geom = \"linerange\",\n    xmin = .7, xmax = 4.3, y = 0\n  )  +\n  geom_text(\n    aes(label = season, y = 0),\n    family = \"Cabinet Grotesk\", size = 4.5,\n    fontface = \"bold\", hjust = 1.15\n  ) +\n  coord_polar(theta = \"y\") +\n  scale_x_discrete(\n    expand = c(.5, .5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 7.5*10^6)\n  ) +\n  theme_void() +\n  theme(plot.margin = margin(rep(-100, 4)))\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-pt2-exercise-2-8-1.png){width=1500}\n:::\n:::\n\n\n\n## Solution using `stat_summary()`\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code  code-line-numbers=\"1|2,3,4|5,6,7,8|9,10,11,12,13,14\"}\nggplot(bikes, aes(x = as.numeric(season), y = count)) +\n  stat_summary(\n    geom = \"point\", fun = \"sum\", size = 3\n  ) +\n  stat_summary(\n    geom = \"linerange\", ymin = 0,\n    fun.max = function(y) sum(y)\n  ) +\n  stat_summary(\n    geom = \"text\",\n    aes(\n      label = season,\n      y = 0\n    ),\n    family = \"Cabinet Grotesk\", size = 4.5,\n    fontface = \"bold\", hjust = 1.15\n  ) +\n  annotate(\n    geom = \"linerange\",\n    xmin = .7, xmax = 4.3, y = 0\n  ) +\n  coord_polar(theta = \"y\") +\n  scale_x_discrete(\n    expand = c(.5, .5)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 7.5*10^6)\n  ) +\n  theme_void() +\n  theme(plot.margin = margin(rep(-100, 4)))\n```\n\n::: {.cell-output-display}\n![](03_concepts_pt2_ex2_solution_files/figure-revealjs/concepts-exercise-lollipop-stat-summary-1.png){width=1500}\n:::\n:::\n",
    "supporting": [
      "03_concepts_pt2_ex2_solution_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    function fireSlideChanged(previousSlide, currentSlide) {\n\n      // dispatch for htmlwidgets\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for reveal\n    if (window.Reveal) {\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\n        fireSlideChanged(event.previousSlide, event.currentSlide);\n      });\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}